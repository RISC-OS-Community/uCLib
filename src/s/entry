;
;
;
;
        GET     ListOpts
        GET     Macros
        GET     System

        IMPORT  main
        IMPORT  __RelocCode

        EXPORT  __main
        EXPORT  __rt_stkovf_split_small
;        EXPORT  malloc
;        EXPORT  free

        AREA |Util$$Code|, CODE, READONLY, PIC
        ENTRY
__main
        STMFD  sp!,{a1-a3,fp,lr}
        MOV    r11,#0
;        STR    a3,[lr, #malloc_ptr - continue]
;continue
        BL     __RelocCode
        LDMFD  sp!, {a1-a3,fp}
        BL     main
        LDR    PC,[r13],#4

;malloc_ptr
;        DCD    0 ; I think this is required to track malloc next addr
;malloc
;        ADD    a2, a1, #3
;        LDR    a1, malloc_ptr
;        BIC    a2, a2, #3
;        ADD    a2, a2, a1
;        STR    a2, malloc_ptr
;free
;        MOV    pc, lr
__rt_stkovf_split_small
         MOV    pc, lr
        END
