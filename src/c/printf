/*
 * RISC OS uCLib (Micro C Library)
 *
 *   Purpose: An  extremely small  and  light weight  statically
 *            link-able  C library  for  RISC OS  Utilities  and
 *            Applications  that   do  not  want  to  depend  on
 *            ShareCLib or ANSILib.
 *            Please Note:
 *            This is NOT a replacement library for the SCLib
 *            or the ANSILib!  This  library  is suitable only
 *            for Utilities and Modules. It might be suitable
 *            for some Application too, but honestly is NOT
 *            recommended for it! So do NOT ask for help if you
 *            intend to use it beyond its scope.
 *
 *    Author: Paolo Fabio Zaino
 * Copyright: 2021 (c) by Paolo Fabio Zaino
 *
 * Distributed under Apache 2.0 license
 *
*/

#include "stdio.h"
#include <stdarg.h>

int _printf(const char* format, ...)
{
	va_list argp;
	va_start(argp, format);

	while (*format != '\0') {
		if (*format == '%') {
			format++;
			if (*format == '%') {
				putchar('%');
			} else if (*format == 'c') {
				char char_to_print = va_arg(argp, int);
				putchar(char_to_print);
			} else {
				fputs("Not implemented", stdout);
			}
		} else {
			putchar(*format);
		}
		format++;
	}
	va_end(argp);
	return 0;
}

int printf(const char * __restrict format, ...)
{
	va_list arg;
	int rv;

	va_start(arg, format);
	rv = vfprintf(stdout, format, arg);
	va_end(arg);

	return rv;
}